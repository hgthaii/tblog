<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="UTF-8">
	<title>Manage Skills · TBlog</title>
	<link rel="stylesheet" href="/css/main.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		/* Admin specific overrides */
		body {
			height: 100vh;
			overflow: hidden;
		}

		.container {
			height: 100%;
			max-width: 100%;
			padding: 0;
		}

		.admin-layout {
			height: 100vh;
			display: grid;
			grid-template-columns: 400px 1fr;
		}

		.admin-sidebar {
			background: var(--bg-surface);
			border-right: 1px solid var(--border);
			padding: 32px;
			overflow-y: auto;
		}

		.admin-content {
			padding: 32px;
			overflow-y: auto;
		}

		@media (max-width: 768px) {
			.admin-layout {
				grid-template-columns: 1fr;
			}

			.admin-sidebar {
				border-right: none;
				border-bottom: 1px solid var(--border);
				height: auto;
				max-height: 50vh;
			}
		}
	</style>
</head>

<body>

	<div class="admin-layout">
		<!-- LEFT: Form -->
		<div class="admin-sidebar">
			<div style="margin-bottom: 32px;">
				<a href="/admin" class="back-link" style="margin-bottom: 16px;">← Back to Dashboard</a>
				<h2>Add Skill</h2>
			</div>

			<form method="post" action="/admin/skills">
				<div class="form-group">
					<label class="form-label">Name</label>
					<input class="form-control" name="name" required placeholder="Ex: Spring Boot" autofocus />
				</div>

				<div class="form-group">
					<label class="form-label">Type</label>
					<select class="form-control" name="type">
						<option th:each="type : ${types}" th:value="${type}" th:text="${type}"></option>
					</select>
				</div>

				<div class="form-group">
					<label class="form-label">Proficiency (%)</label>
					<input type="number" class="form-control" name="proficiency" value="50" min="0" max="100" />
				</div>

				<div class="form-group">
					<label class="form-label">Description</label>
					<textarea class="form-control" name="description" placeholder="Markdown supported..."
						style="min-height: 120px;"></textarea>
				</div>

				<button type="submit" class="btn" style="width: 100%;">Save Skill</button>
			</form>
		</div>

		<!-- RIGHT: List -->
		<div class="admin-content">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
				<h2>Existing Skills</h2>
				<span style="color: var(--text-muted); font-family: var(--font-mono);">Total:
					[[${#lists.size(skills)}]]</span>
			</div>

			<div style="display: grid; gap: 12px;">
				<div th:each="skill : ${skills}"
					style="background: var(--bg-surface); padding: 16px; border-radius: var(--radius-sm); border: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
					<div style="display: flex; align-items: center; gap: 12px;">
						<div
							style="width: 32px; height: 32px; background: rgba(255,255,255,0.05); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 600;">
							[[${#strings.substring(skill.name, 0, 1)}]]
						</div>
						<div>
							<div style="font-weight: 600; color: var(--text-primary);">[[${skill.name}]]</div>
							<div style="font-size: 0.8rem; color: var(--text-secondary);">
								[[${skill.type}]] · [[${skill.proficiency}]]%
							</div>
						</div>
					</div>

					<form method="post" action="/admin/skills/delete" onsubmit="return confirm('Are you sure?')">
						<input type="hidden" name="id" th:value="${skill.id}" />
						<button type="submit" class="btn-secondary"
							style="padding: 6px 12px; font-size: 0.8rem; color: #ff6b6b; border-color: rgba(255,107,107,0.2);">Delete</button>
					</form>
				</div>
			</div>
		</div>
	</div>

</body>

</html>